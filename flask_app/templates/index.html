<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat Interface</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
      }
      .chat-container {
        max-width: 800px;
        margin: 20px auto;
        border: 1px solid #ccc;
        border-radius: 5px;
        overflow: hidden;
      }
      .chat-messages {
        height: 300px;
        overflow-y: auto;
        padding: 10px;
      }
      .chat-input {
        width: 100%;
        padding: 10px;
        border: none;
        border-top: 1px solid #ccc;
        box-sizing: border-box;
        outline: none;
      }
      .user-message {
        background-color: rgb(0, 0, 255);
        max-width: 70%;
        border-radius: 24px;
        padding: 8px 16px;
        color: #fff;
        margin-bottom: 8px;
      }
      .other-message {
        background-color: rgba(153, 153, 153, 0.2);
        max-width: 70%;
        border-radius: 24px;
        padding: 8px 16px;
        margin-bottom: 8px;
      }
      .message-wrapper {
        display: flex;
      }
      .other-message-wrapper {
        display: flex;
        flex-direction: row-reverse;
      }
      ::-webkit-scrollbar {
        width: 6px; /* Width of the scrollbar */
      }

      /* Track (the background) */
      ::-webkit-scrollbar-track {
        background: #f1f1f1; /* Color of the track */
        border-radius: 10px; /* Rounded corners */
      }

      /* Handle (the draggable part) */
      ::-webkit-scrollbar-thumb {
        background: #e5e5e5; /* Color of the thumb */
        border-radius: 10px; /* Rounded corners */
      }

      /* Handle on hover */
      ::-webkit-scrollbar-thumb:hover {
        background: #dadada; /* Darker color on hover */
      }
    </style>
  </head>
  <body>
    <h1>Welcome to the Chat Application!</h1>
    <div class="chat-container">
      <div class="chat-messages" id="chat-messages">
        <!-- Messages will be displayed here -->
      </div>
      <input
        type="text"
        class="chat-input"
        id="user-input"
        placeholder="Type your message..."
      />
    </div>

    <script>
      const chatMessages = document.getElementById("chat-messages");
      const userInput = document.getElementById("user-input");

      // Function to add a message to the chat interface
      function addMessage(message, sender) {
        const messageElementWarapper = document.createElement("div");
        const messageElement = document.createElement("div");
        messageElement.classList.add("message");
        messageElement.classList.add(
          sender === "user" ? "user-message" : "other-message"
        );
        messageElement.innerText = message;
        messageElementWarapper.appendChild(messageElement);
        messageElementWarapper.classList.add(
          sender === "user" ? "message-wrapper" : "other-message-wrapper"
        );
        chatMessages.appendChild(messageElementWarapper);
        chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to bottom
      }

      // Function to handle user input
      function handleUserInput() {
        const message = userInput.value.trim();
        if (message !== "") {
          addMessage(message, "user");
          // Here you can implement logic to send the message to a server or process it further
          // For simplicity, we'll just clear the input field
          userInput.value = "";
          // You can also simulate receiving a response from the server after some time
          fetch("http://127.0.0.1:8080/chat", {
            method: "POST",
            body: JSON.stringify({ sender: "shivani", message: message }),
          })
            .then((res) => {
              return res.json();
            })
            .then((data) => {
              console.log(data);
              addMessage(data[0].text);
            });
          //   setTimeout(() => {
          //     addMessage("This is a response from the server.", "other");
          //   }, 1000);
        }
      }

      // Event listener for user input
      userInput.addEventListener("keypress", function (event) {
        if (event.key === "Enter") {
          handleUserInput();
        }
      });
    </script>
  </body>
</html>